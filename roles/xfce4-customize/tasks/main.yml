- name: Change the DPI to "96"
  community.general.xfconf:
    channel: xsettings
    property: /Xft/DPI
    value_type: int
    value: 96

- name: Customize {{ remote_user.name }}'s wallpaper
  community.general.xfconf:
    channel: xfce4-desktop
    property: /backdrop/screen0/monitorVirtual-1/workspace0/last-image
    value_type: string
    value: /usr/share/backgrounds/xfce/XFCE_83_No_Logo.png
    state: present

- name: Customize {{ remote_user.name }}'s theme
  community.general.xfconf:
    channel: xsettings
    property: /Net/ThemeName
    value_type: string
    value: Gradient-black-46
    state: present

- name: Customize {{ remote_user.name }}'s icons
  community.general.xfconf:
    channel: xsettings
    property: /Net/IconThemeName
    value_type: string
    value: EFDark-IconsCream
    state: present

- name: Load custom actions into {{ remote_user.name }}'s filemanager
  ansible.builtin.command: |
    uca-apply
  become: true

- name: Enable and start pipewire-pulse user service for {{ remote_user.name }}
  ansible.builtin.systemd:
    name: pipewire-pulse.service
    scope: user
    state: started
    enabled: true
  become: true
  become_user: "{{ remote_user.name }}"
  environment:
    XDG_RUNTIME_DIR: "/run/user/{{ remote_user.uid }}"

- name: Enable and start wireplumber user service for {{ remote_user.name }}
  ansible.builtin.systemd:
    name: wireplumber.service
    scope: user
    state: started
    enabled: true
  become: true
  become_user: "{{ remote_user.name }}"
  environment:
    XDG_RUNTIME_DIR: "/run/user/{{ remote_user.uid }}"

